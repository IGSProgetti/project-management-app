/* ===================================
   CALENDARIO MOBILE - STILE iOS FULLSCREEN  
   Tutti i 7 giorni visibili + eventi leggibili
   =================================== */

@media (max-width: 768px) {
    
    /* FORZA LA VISTA A OCCUPARE TUTTO LO SCHERMO */
    html, body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
    }
    
    /* ===================================
       0. NASCONDI FILTRI E LEGENDA SU MOBILE
       =================================== */
    
    /* Nascondi il box dei filtri */
    .container-fluid .card.mb-4:has(.card-header h5) {
        display: none !important;
    }
    
    /* Nascondi la legenda */
    .container-fluid .card.mb-4:has(.legend-box) {
        display: none !important;
    }
    
    /* ===================================
       1. ELIMINA BOX BIANCO DEL CALENDARIO
       =================================== */
    
    /* Rimuovi il box bianco che contiene il calendario */
    .container-fluid > .card:last-child {
        background: none !important;
        box-shadow: none !important;
        border: none !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    .container-fluid > .card:last-child .card-body {
        padding: 0 !important;
    }
    
    /* Calendario a schermo intero */
    #calendar {
        background: #f5f5f7;
        border-radius: 0;
        overflow: hidden;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* ===================================
       2. HEADER - STILE iOS COMPATTO
       =================================== */
    
    .fc .fc-toolbar {
        background: white;
        padding: 8px 12px !important;
        margin-bottom: 0 !important;
        border-bottom: 1px solid #e5e5e7;
        display: flex !important;
        flex-direction: row !important;
        align-items: center !important;
        justify-content: space-between !important;
        flex-wrap: nowrap !important;
    }
    
    /* Container bottoni a sinistra */
    .fc .fc-toolbar-chunk:first-child {
        display: flex !important;
        gap: 4px !important;
        flex-shrink: 0 !important;
    }
    
    /* Titolo al centro */
    .fc .fc-toolbar-chunk:nth-child(2) {
        flex: 1 !important;
        overflow: hidden !important;
    }
    
    /* Bottoni a destra */
    .fc .fc-toolbar-chunk:last-child {
        display: flex !important;
        gap: 4px !important;
        flex-shrink: 0 !important;
    }
    
    /* Bottoni navigazione iOS style - PIÙ PICCOLI */
    .fc .fc-button {
        background: transparent !important;
        border: none !important;
        color: #007AFF !important;
        font-size: 14px !important;
        padding: 4px 8px !important;
        box-shadow: none !important;
        font-weight: 400 !important;
        min-width: auto !important;
    }
    
    .fc .fc-button .fc-icon {
        font-size: 16px !important;
    }
    
    /* Nascondi il bottone "oggi" */
    .fc .fc-today-button {
        display: none !important;
    }
    
    /* Nascondi bottone settimana su mobile */
    .fc .fc-timeGridWeek-button {
        display: none !important;
    }
    
    /* Titolo mese - PIÙ PICCOLO */
    .fc .fc-toolbar-title {
        font-size: 20px !important;
        font-weight: 700 !important;
        color: #000 !important;
        margin: 0 !important;
        text-align: center !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    /* Bottoni Mese/Lista - PIÙ PICCOLI */
    .fc .fc-dayGridMonth-button,
    .fc .fc-listMonth-button {
        font-size: 13px !important;
        padding: 4px 10px !important;
    }
    
    /* ===================================
       3. INTESTAZIONI GIORNI SETTIMANA
       =================================== */
    
    .fc .fc-col-header {
        background: white;
        border: none !important;
    }
    
    .fc .fc-col-header-cell {
        padding: 6px 2px !important;
        border: none !important;
        background: white;
    }
    
    .fc .fc-col-header-cell-cushion {
        color: #8e8e93 !important;
        font-size: 10px !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 0px !important;
    }
    
    /* ===================================
       4. CELLE GIORNI - COMPATTE PER STARE TUTTE
       =================================== */
    
    .fc .fc-daygrid-body {
        border: none !important;
    }
    
    .fc .fc-scrollgrid {
        border: none !important;
    }
    
    /* CELLE PIÙ PICCOLE per far stare tutto */
    .fc .fc-daygrid-day {
        background: white !important;
        border: 0.5px solid #e8e8e8 !important;
        min-height: 55px !important;
        max-height: 55px !important;
        padding: 2px !important;
        position: relative;
        overflow: hidden;
    }
    
    /* Giorni del weekend */
    .fc .fc-day-sat,
    .fc .fc-day-sun {
        background: #fafafa !important;
    }
    
    /* Oggi - cerchio rosso iOS PIÙ PICCOLO */
    .fc .fc-day-today {
        background: white !important;
    }
    
    .fc .fc-day-today .fc-daygrid-day-number {
        background: #FF3B30 !important;
        color: white !important;
        width: 24px !important;
        height: 24px !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        margin: 2px auto 0 !important;
        padding: 0 !important;
        font-weight: 600 !important;
        font-size: 14px !important;
    }
    
    /* Numero del giorno - PIÙ PICCOLO */
    .fc .fc-daygrid-day-number {
        padding: 2px !important;
        font-size: 14px !important;
        font-weight: 400 !important;
        color: #000 !important;
        text-align: center !important;
        width: 100% !important;
    }
    
    /* Giorni del mese precedente/successivo */
    .fc .fc-day-other .fc-daygrid-day-number {
        color: #c7c7cc !important;
    }
    
    /* ===================================
       5. EVENTI - PALLINO + TESTO BREVE
       =================================== */
    
    .fc .fc-daygrid-day-events {
        margin-top: 2px !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 1px !important;
        padding: 0 2px !important;
        overflow: hidden !important;
        max-height: 28px !important;
    }
    
    /* Ogni evento = riga con pallino + testo */
    .fc .fc-daygrid-event {
        background: none !important;
        border: none !important;
        border-left: 2px solid currentColor !important;
        padding: 1px 3px !important;
        margin: 0 !important;
        width: 100% !important;
        display: flex !important;
        align-items: center !important;
        gap: 3px !important;
        min-height: 12px !important;
        max-height: 12px !important;
        overflow: hidden !important;
    }
    
    /* Rimuovi il pallino ::before */
    .fc .fc-daygrid-event::before {
        display: none !important;
    }
    
    /* MOSTRA il titolo dell'evento */
    .fc .fc-daygrid-event .fc-event-title {
        display: block !important;
        font-size: 9px !important;
        line-height: 10px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        color: #333 !important;
        font-weight: 500 !important;
        max-width: 100% !important;
    }
    
    /* NASCONDI solo i dettagli extra e l'orario */
    .fc .fc-daygrid-event .fc-event-time,
    .fc .fc-daygrid-event .event-details-preview {
        display: none !important;
    }
    
    /* MOSTRA il div del titolo ma nascondi i div dei dettagli */
    .fc .fc-daygrid-event > div {
        display: block !important;
        width: 100% !important;
        overflow: hidden !important;
    }
    
    .fc .fc-daygrid-event > div > div:not(.fc-event-title) {
        display: none !important;
    }
    
    /* Link "più eventi" */
    .fc .fc-daygrid-more-link {
        font-size: 9px !important;
        color: #007AFF !important;
        margin-top: 2px !important;
        padding: 2px 4px !important;
        background: #f5f5f7 !important;
        border-radius: 3px !important;
        font-weight: 500 !important;
    }
    
    /* Colori bordino laterale per tipo evento */
    .fc .event-project {
        border-left-color: #6f42c1 !important; /* Viola */
    }
    
    .fc .event-activity {
        border-left-color: #fd7e14 !important; /* Arancione */
    }
    
    .fc .event-task {
        border-left-color: #20c997 !important; /* Verde acqua */
    }
    
    /* ===================================
       6. FORZA TUTTI I 7 GIORNI VISIBILI - NO SCROLL
       =================================== */
    
    /* CRITICO: Impedisci qualsiasi scroll orizzontale */
    .fc-view-harness,
    .fc-view-harness-active,
    .fc .fc-scroller,
    .fc .fc-scroller-liquid-absolute,
    .fc-daygrid-body,
    .fc-scrollgrid,
    .fc-scrollgrid-sync-table {
        overflow: hidden !important;
        overflow-x: hidden !important;
        width: 100% !important;
    }
    
    /* Forza la tabella a occupare esattamente lo schermo */
    .fc table {
        width: 100% !important;
        table-layout: fixed !important;
        border-collapse: collapse !important;
    }
    
    /* Ogni colonna giorno = esattamente 1/7 dello schermo */
    .fc .fc-col-header-cell,
    .fc .fc-daygrid-day {
        width: 14.28% !important; /* 100% / 7 giorni */
        max-width: 14.28% !important;
        min-width: 0 !important;
    }
    
    /* CRITICO: Impedisci che il contenuto allarghi le celle */
    .fc .fc-daygrid-day-frame {
        overflow: hidden !important;
        width: 100% !important;
    }
    
    .fc .fc-daygrid-day-top {
        overflow: hidden !important;
    }
    
    .fc .fc-daygrid-day-events {
        min-height: 0 !important;
        overflow: hidden !important;
    }
    
    /* ===================================
       7. VISTA LISTA - SENZA "TUTTO IL GIORNO"
       =================================== */
    
    .fc-list {
        border: none !important;
        background: white !important;
    }
    
    .fc .fc-list-day-cushion {
        background: #f5f5f7 !important;
        padding: 10px 12px !important;
        font-weight: 600 !important;
        font-size: 13px !important;
    }
    
    .fc .fc-list-event {
        border-bottom: 1px solid #f0f0f0 !important;
        padding: 10px 12px !important;
    }
    
    .fc .fc-list-event:hover {
        background: #f9f9f9 !important;
    }
    
    /* NASCONDI "Tutto il giorno" nella vista lista */
    .fc .fc-list-event-time {
        display: none !important;
    }
    
    .fc .fc-list-event-title {
        font-size: 14px !important;
    }
    
    /* ===================================
       8. POPUP EVENTI
       =================================== */
    
    .fc .fc-popover {
        background: white !important;
        border-radius: 12px !important;
        box-shadow: 0 4px 20px rgba(0,0,0,0.15) !important;
        border: none !important;
        max-width: 90vw !important;
    }
    
    .fc .fc-popover-header {
        background: #f5f5f7 !important;
        padding: 10px !important;
        border-radius: 12px 12px 0 0 !important;
        font-weight: 600 !important;
        font-size: 14px !important;
    }
    
    .fc .fc-popover-body {
        padding: 6px !important;
    }
    
    /* ===================================
       9. AGGIUSTAMENTI FINALI
       =================================== */
    
    /* Riduci padding del container principale */
    .container-fluid {
        padding-left: 8px !important;
        padding-right: 8px !important;
    }
    
    /* Riduci margine del titolo pagina */
    .container-fluid .row.mb-4 {
        margin-bottom: 8px !important;
    }
    
    .container-fluid .row.mb-4 h1 {
        font-size: 24px !important;
    }
}